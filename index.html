<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <title>Jemek Jemowit</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <style>
    </style>
</head>
<body>
<a-scene
        id="scene"
        vr-mode-ui="enabled: false">

    <!-- Assets -->
    <a-assets>
        <a-asset-item id="jmk" src="assets/jmk-head.glb"></a-asset-item>
        <img id="sky" src="assets/jmk-bg.svg">
        <audio id="bg-noise" src="assets/WarteschleifeAnnabellxJemek.mp3" preload="auto"></audio>
    </a-assets>

    <!-- Camera and Stuff -->
    <a-camera
            position="0 1.6 0"
            look-controls="enabled:false"
            wasd-controls="enabled:false">
        <a-cursor
                id="cursor"
                material="color: yellow; shader: flat"
                position="0 0 -10">
        </a-cursor>
    </a-camera>

    <!-- Controller -->
    <a-entity
            id="controller"
            laser-controls="hand: right"
            line="color: red; opacity: 0.75">
    </a-entity>

    <!-- Sound Entity -->
    <a-entity
            id="sound-entity"
            sound="src: #bg-noise; autoplay: false; loop: true">
    </a-entity>

    <!-- Basic Scene -->
    <a-sky
            src="#sky"
            repeat="10 10"
            transparent="true">
    </a-sky>

    <a-entity
            light="type: ambient; intensity: 0.1">

    </a-entity>
    <a-entity
            light="type: directional; castShadow: true; intensity:0.5;"
            position=" 1 1 1">

    </a-entity>

    <a-entity
            id="floor"
            geometry="primitive: plane;"
            scale="100 100"
            position="0 0 0"
            rotation="-90 0 0"
            shadow="receive: true">
    </a-entity>

    <!-- Sound Control -->
    <a-entity id="sound-control"
              class="clickable"
              geometry="primitive: plane;"
              scale="0.1 0.1"
              color="red"
              position="1 2 -1">
    </a-entity>

    <!-- Scene Filler -->
    <a-entity
            id="vr-model"
            gltf-model="#jmk"
            scale="3 3 3"
            position="0 1.5 -2"
            shadow="cast: true; receive: false">
    </a-entity>

    <a-entity hide-on-enter-vr id="buttons" position="0 2 -1">
        <a-entity class="clickable" id="#" geometry="primitive: plane;" src="#" scale="0.1 0.1" position="0 0.25 0" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="home" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.25 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="about" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.5 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="gigs" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.25 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="instagram" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.5 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="youtube" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.75 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="telegram" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.75 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="spotify" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>
    </a-entity>

</a-scene>

<script>
    document.addEventListener('DOMContentLoaded', () => {
       const clickAble = document.querySelector('.clickable');

       clickAble.addEventListener('click', () => {
           console.log('clickeded');
       });
    });
</script>

<!-- Sound Control Script -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const box = document.querySelector('#sound-control');
        const soundEntity = document.querySelector('#sound-entity');

        if (box && soundEntity) {
            box.addEventListener('click', () => {
                const soundComponent = soundEntity.components.sound;
                if (soundComponent.isPlaying) {
                    soundComponent.pauseSound(); // Pausiert den Sound
                    console.log('Sound pausiert');
                } else {
                    soundComponent.playSound(); // Führt den Sound fort
                    console.log('Sound fortgesetzt');
                }
            });
        } else {
            console.error('Elemente nicht gefunden!');
        }
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const cursor = document.querySelector('#cursor');
        const scene = document.querySelector('a-scene');
        const look = document.querySelector('#vr-model');

        if (cursor && scene) {
            cursor.setAttribute('raycaster', 'objects: .clickable; far: 0');
            // Linie für den Ray erstellen
            const rayLine = document.createElement('a-entity');
            rayLine.setAttribute('line', {
                start: '0 0 0',
                end: '0 0 -1', // Der Ray zeigt standardmäßig nach vorne
                color: 'yellow',
                opacity: 0.5,
            });
            cursor.appendChild(rayLine);

            // Event-Listener für Mausbewegungen
            document.addEventListener('mousemove', (event) => {
                const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

                //console.log('Cursor mousemove', mouseX, mouseY);

                // Position des Cursors aktualisieren
                cursor.object3D.position.set(mouseX, mouseY, -1);
                look.object3D.lookAt(mouseX*120, mouseY*120, 100);

                // Position der Linie aktualisieren
                rayLine.setAttribute('line', {
                    start: '0 0 10',
                    end: `0 0 -10`, // Der Ray bleibt konstant in -Z-Richtung
                    color: 'yellow',
                });
            });
        } else {
            console.error('Cursor oder Szene nicht gefunden!');
        }
    });
</script>

<!--script>
    // Hier kannst du die Kamera-Position im VR-Modus anpassen
    document.querySelector('a-scene').addEventListener('enter-vr', function () {
        const camera = document.querySelector('a-camera');
        // Hier kannst du die Position der Kamera manuell setzen, falls gewünscht
        camera.setAttribute('position', '0 1.6 2');
    });
</script-->


</body>
</html>
