<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <title>Jemek Jemowit</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <style>
    </style>
</head>
<body>
<a-scene
        id="scene"
        vr-mode-ui="enabled: false">

    <!-- Assets -->
    <a-assets>
        <a-asset-item id="jmk" src="assets/jmk-head.glb"></a-asset-item>
        <img id="sky" src="assets/jmk-bg.svg">
        <audio id="bg-noise" src="assets/WarteschleifeAnnabellxJemek.mp3" preload="auto"></audio>
        <a-asset-item id="radio-obj" src="/assets/Radio.obj"></a-asset-item>
        <a-asset-item id="radio-mtl" src="/assets/Radio.mtl"></a-asset-item>
        <a-asset-item id="table-corona-obj" src="/assets/Tv_Table_Corona_Obj.obj"></a-asset-item>
        <a-asset-item id="table-Vray-obj" src="/assets/Tv_Table_Vray_Obj.obj"></a-asset-item>
    </a-assets>

    <!-- Camera and Stuff -->
    <a-camera
            id="2d-camera"
            active="false"
            position="0 1.6 0"
            look-controls="enabled:false"
            wasd-controls="enabled:false">
        <a-cursor
                id="cursor"
                material="color: yellow; shader: flat"
                position="0 0 -1">
        </a-cursor>
    </a-camera>

    <a-camera
            id="dev-camera"
            active="true"
            position="0 1.6 0"
            look-controls="enabled:true"
            wasd-controls="enabled:true">
        <a-cursor
                id="cursor"
                material="color: yellow; shader: flat"
                position="0 0 -1">
        </a-cursor>
    </a-camera>

    <!-- Controller -->
    <a-entity
            id="controller"
            laser-controls="hand: right"
            line="color: red; opacity: 0.75">
    </a-entity>

    <!-- Sound Entity -->
    <a-entity
            id="sound-entity"
            sound="src: #bg-noise; autoplay: false; loop: true;">
    </a-entity>

    <!-- Basic Scene -->
    <a-sky
            src="#sky"
            repeat="10 10"
            transparent="true">
    </a-sky>

    <a-entity
            light="type: ambient; intensity: 0.1">

    </a-entity>
    <a-entity
            light="type: directional; castShadow: true; intensity:0.5;"
            position=" 1 1 1">

    </a-entity>

    <a-entity
            id="floor"
            geometry="primitive: plane;"
            scale="100 100"
            position="0 0 0"
            rotation="-90 0 0"
            shadow="receive: true">
    </a-entity>

    <a-entity id="table-radio-setup"
              position="1 0 -2.5"
              scale="1 1 1"
              rotation="0 -20 0">

        <a-entity id="table1"
                  obj-model="obj: #table-corona-obj;"
                  position="0 0 0"
                  scale="0.002 0.002 0.002"
                  shadow="cast: true; receive: false">
        </a-entity>

        <a-entity id="table2"
                  obj-model="obj: #table-vray-obj;"
                  position="0 0 0"
                  scale="0.002 0.002 0.002"
                  shadow="cast: true; receive: false">
        </a-entity>

        <a-entity id="radio"
                  class="clickable"
                  obj-model="obj: #radio-obj; mtl: #radio-mtl"
                  position=".78 1.42 0.2"
                  scale="0.001 0.001 0.001"
                  rotation="0 -10 0"
                  shadow="cast: true; receive: false">
        </a-entity>
        <a-entity id="sound-control-radio"
                  class="sound-control"
                  geometry="primitive: plane;"
                  scale="0.1 0.1"
                  material="color:#ff0000; opacity:0.5"
                  position="0.97 1.55 0.2">
        </a-entity>
    </a-entity>

    <!-- Sound Control -->
    <a-entity id="sound-control-box"
              class="sound-control"
              geometry="primitive: plane;"
              scale="0.1 0.1"
              material="color:#ff0000"
              position="1 2 -1">
    </a-entity>

    <!-- Scene Filler -->
    <a-entity
            id="vr-model"
            gltf-model="#jmk"
            scale="3 3 3"
            position="0 1.5 -2"
            shadow="cast: true; receive: false">
    </a-entity>

    <a-entity hide-on-enter-vr id="buttons" position="0 2 -1">
        <a-entity class="clickable" id="#" geometry="primitive: plane;" src="#" scale="0.1 0.1" position="0 0.25 0" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="home" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.25 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="about" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.5 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="gigs" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.25 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="instagram" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.5 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="youtube" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0.75 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="telegram" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="-0.75 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>

        <a-entity class="clickable" id="spotify" src="#" geometry="primitive: plane;" scale="0.1 0.1" position="0 0 0" depth="0.15" height="0.15" width="0.15" navigate-on-click="url: http://#">
        </a-entity>
    </a-entity>

</a-scene>

<!-- Sound Control Script -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const box = document.querySelector('#sound-control-box');
        const rKnob = document.querySelector('#sound-control-radio');
        const soundEntity = document.querySelector('#sound-entity');

        soundEntity.addEventListener('sound-loaded', () => {
            const soundComponent = soundEntity.components.sound;
            soundComponent.isPlaying = false;
            if (rKnob){
                rKnob.addEventListener('click', () => {
                    if (soundComponent.isPlaying) {
                        soundComponent.pauseSound(); // Pausiert den Sound
                        console.log('Sound pausiert');
                    } else {
                        soundComponent.playSound(); // Führt den Sound fort
                        console.log('Sound fortgesetzt');
                    }
                });
            } else {
                console.log('no knob');
            }

            if (box){
                box.addEventListener('click', () => {
                    if (soundComponent.isPlaying) {
                        soundComponent.pauseSound(); // Pausiert den Sound
                        console.log('Sound pausiert');
                    } else {
                        soundComponent.playSound(); // Führt den Sound fort
                        console.log('Sound fortgesetzt');
                    }
                });
            } else {
                console.log('no box');
            }

        });
    });
</script>

<!-- Clicker -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const clickables = document.getElementsByClassName('clickable');
        for (let i = 0; i < clickables.length; i++) {
            clickables[i].addEventListener('click', () => {
                console.log('clicked clicker');
            });
        }
    });
</script>

<!--script>
    document.addEventListener('DOMContentLoaded', () => {
        const cursor = document.querySelector('#cursor');
        const scene = document.querySelector('a-scene');
        const look = document.querySelector('#vr-model');

        if (cursor && scene) {
            cursor.setAttribute('raycaster', 'objects: .clickable; far: 0');
            // Linie für den Ray erstellen
            const rayLine = document.createElement('a-entity');
            rayLine.setAttribute('line', {
                start: '0 0 0',
                end: '0 0 -1', // Der Ray zeigt standardmäßig nach vorne
                color: 'yellow',
                opacity: 0.5,
            });
            cursor.appendChild(rayLine);

            // Event-Listener für Mausbewegungen
            document.addEventListener('mousemove', (event) => {
                const mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                const mouseY = -(event.clientY / window.innerHeight) * 2 + 1;

                //console.log('Cursor mousemove', mouseX, mouseY);

                // Position des Cursors aktualisieren
                cursor.object3D.position.set(mouseX, mouseY, -1);
                look.object3D.lookAt(mouseX*120, mouseY*120, 100);

                // Position der Linie aktualisieren
                rayLine.setAttribute('line', {
                    start: '0 0 0',
                    end: `0 0 -1`, // Der Ray bleibt konstant in -Z-Richtung
                    color: 'yellow',
                });
            });
        } else {
            console.error('Cursor oder Szene nicht gefunden!');
        }
    });
</script-->

<!--script>
    // Hier kannst du die Kamera-Position im VR-Modus anpassen
    document.querySelector('a-scene').addEventListener('enter-vr', function () {
        const camera = document.querySelector('a-camera');
        // Hier kannst du die Position der Kamera manuell setzen, falls gewünscht
        camera.setAttribute('position', '0 1.6 2');
    });
</script-->


</body>
</html>
